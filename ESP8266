#include "FirebaseESP8266.h"
#include <ESP8266WiFi.h>

#define FIREBASE_HOST "esp8266firebase-c0d21-default-rtdb.firebaseio.com/"
#define FIREBASE_AUTH "H1LIBMkrhFGq0gaONtIso13ad7RACrtjdxboJwUN"
#define WIFI_SSID "iptime5G"
#define WIFI_PASSWORD "42352423"

FirebaseData firebaseData

void setup() {  // put your setup code here, to run once:
  Serial.begin(115200);

  // 15 ~ 26: wifi 접속
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  Serial.println();
  Serial.print( "Connecting to Wi-Fi ");
  while (WiFi.status() != WL_CONNECTED)
  {
    Serial.print( " . " );
    delay(300);
  }
  Serial.println();
  Serial.print(" Connected with IP: ");
  Serial.println(WiFi.localIP());
  Serial.println();

  // 29 ~ 35: firebase 접속 및 기본설정
  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);
  Firebase.reconnectWiFi(true);

  firebaseeData.setBSSLBufferSize(1024,1024);
  firebaseData.setResponseSize(1024);
  Firebase.setReadTimeout(firebaseData, 1000 *60);
  Firebase.setwriteSizeLimit(firebaseData, " tiny ");

}

void loop() {
  // put your main code here, to run repeatedly:
  static int cnt = 0;
  static unsigned long prevTime = 0;
  static unsigned long nowTime = 0;

  // 5초마다 /esp8266/count에 cnt값 보냄
  nowTime = millis();
  if (nowTime - prevTime >= 5000)
  {
    prevTime = nowTime;
    float A0Val = analogRead(A0);
    Firebase.setFloat(firebaseData, " /esp8266/count ", cnt++);
    Firebase.setInt(firebaseData, " /esp8266/A0 ", A0Val)
  }
}
